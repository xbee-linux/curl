schema-version: 1.0

type: builder

const:
  srcDir: /usr/src
  exportDir: /opt/curl

dependencies:
  - openssl

provision:
  - url:
      from: https://curl.se/download/curl-{% version %}.tar.gz
      todir: /usr/src

build:
  - shell:
      cmds:
        - ./configure --prefix=/usr --disable-static --with-openssl --enable-threaded-resolver --with-ca-path=/etc/ssl/certs
        - make
        - make install DESTDIR={% exportDir %}
      directory: /usr/src/curl-{% version %}
  - export: "{% exportDir %}"

